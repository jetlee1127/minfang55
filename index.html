<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯å¯å†’éšªå³¶ Discord æŒ‡å—æ¨¡æ“¬</title>
    <style>
        /* --- CSS æ¨£å¼ --- */
        :root {
            --discord-bg-darkest: #202225;
            --discord-bg-dark: #2f3136;
            --discord-bg-medium: #36393f;
            --discord-bg-light: #40444b;
            --discord-header: #202225;
            --discord-text-primary: #dcddde;
            --discord-text-secondary: #b9bbbe;
            --discord-text-muted: #72767d;
            --discord-text-link: #0096cf;
            --discord-channel-text: #b9bbbe;
            --discord-channel-hover-bg: #3a3c43;
            --discord-active-channel-bg: var(--discord-bg-light);
            --discord-mention-bg: rgba(88, 101, 242, 0.3);
            --discord-scrollbar-thumb: var(--discord-bg-darkest);
            --discord-scrollbar-track: var(--discord-bg-dark);
            --highlight-green: #43b581;
            --accent-color1: #d4a373;
            --panel-transition: width 0.3s ease-in-out;
        }

        body {
            font-family: 'Whitney', 'Helvetica Neue', Helvetica, Arial, sans-serif;
            line-height: 1.7; margin: 0; background-color: var(--discord-bg-darkest);
            color: var(--discord-text-primary); display: flex; height: 100vh;
            overflow: hidden; font-size: 16px;
        }

        .discord-app-layout { display: flex; width: 100%; height: 100%; }
        .server-list {
            width: 72px; background-color: var(--discord-bg-darkest); padding: 12px 0;
            display: flex; flex-direction: column; align-items: center; flex-shrink: 0;
        }
        .server-icon {
            width: 48px; height: 48px; background-color: var(--discord-bg-light);
            border-radius: 50%; margin-bottom: 8px; display: flex; align-items: center;
            justify-content: center; font-size: 1.8em; color: var(--discord-text-primary);
            cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            transition: border-radius 0.15s ease-out, background-color 0.15s ease-out;
        }
        .server-icon:hover { border-radius: 16px; background-color: var(--accent-color1); }
        .server-icon.active { border-radius: 16px; background-color: var(--accent-color1); }

        /* --- é »é“é¢æ¿ (å¯æ”¶åˆ) --- */
        .channels-panel {
            width: 280px;
            background-color: var(--discord-bg-dark); display: flex;
            flex-direction: column; flex-shrink: 0;
            transition: var(--panel-transition);
            position: relative;
            overflow: hidden;
        }
        .channels-panel.collapsed {
            width: 60px;
        }

        .server-name-header {
            height: 50px; padding: 0 10px 0 16px; display: flex; align-items: center;
            justify-content: space-between;
            font-weight: 600; font-size: 18px; color: var(--discord-text-primary);
            border-bottom: 1px solid var(--discord-bg-darkest);
            box-shadow: 0 1px 0 rgba(0,0,0,0.2), 0 1.5px 0 rgba(0,0,0,0.05), 0 2px 0 rgba(0,0,0,0.05);
            flex-shrink: 0;
            overflow: hidden;
        }
        .server-name-text {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            flex-grow: 1;
            margin-right: 5px;
            display: inline-block; /* ç¢ºä¿ display ä¸æ˜¯ none ä»¥ä¾¿ transition */
            opacity: 1;
            transition: opacity 0.2s ease-out, max-width 0.25s ease-in-out; /* ç§»é™¤ width transitionï¼Œé¿å…å½±éŸ¿ flex */
            max-width: calc(100% - 45px); /* æ¸›å»æŒ‰éˆ•å¯¬åº¦å’Œä¸€äº›é–“è· */
        }
        .channels-panel.collapsed .server-name-text {
            opacity: 0;
            max-width: 0; /* éš±è—æ–‡å­— */
            pointer-events: none;
            /* display: none; æœƒå°è‡´ transition å¤±æ•ˆ, ç”¨ opacity å’Œ max-width æ§åˆ¶ */
        }
        .panel-toggle-button {
            background: none; border: none; color: var(--discord-text-muted);
            font-size: 1.6em; cursor: pointer; padding: 5px;
            line-height: 1; display: flex; align-items: center; justify-content: center;
            flex-shrink: 0;
            width: 40px; height: 40px;
            transition: color 0.2s;
        }
        .panel-toggle-button:hover { color: var(--discord-text-primary); }
        .channels-panel.collapsed .server-name-header {
             justify-content: center;
        }
         .channels-panel.brio-view .panel-toggle-button { /* ç•¶è™•æ–¼brioè¦–åœ–æ™‚ï¼Œä¹Ÿå…è¨±æ”¶åˆæŒ‰éˆ• */
            /* display: none; */ /* å–æ¶ˆä¹‹å‰çš„éš±è—ï¼Œè®“å…¶èˆ‡ guide è¦–åœ–è¡Œç‚ºä¸€è‡´ */
        }
        .channels-panel.brio-view .server-name-text {
            /* å¦‚æœå¸Œæœ›åœ¨å¸ƒé‡Œæ­è¦–åœ–ä¸‹ï¼Œå³ä½¿é¢æ¿å±•é–‹ï¼Œæ¨™é¡Œä¹Ÿéš±è—ï¼Œå¯ä»¥ä¿ç•™ display:none */
            /* ä½†ç‚ºäº†çµ±ä¸€æ”¶åˆé«”é©—ï¼Œé€™è£¡è®“å®ƒå’Œ guide è¦–åœ–ä¸€æ¨£å— collapsed class æ§åˆ¶ */
        }


        .channel-list-container {
            padding: 18px 10px 18px 18px; overflow-y: auto; flex-grow: 1;
            scrollbar-width: thin; scrollbar-color: var(--discord-scrollbar-thumb) var(--discord-scrollbar-track);
            transition: opacity 0.2s ease-out 0.1s, visibility 0s linear 0.3s; /* å»¶é²ä¸€é»å† hidden */
            opacity: 1;
            visibility: visible;
        }
        .channels-panel.collapsed .channel-list-container {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            height: 0 !important;
            padding: 0 !important;
            margin: 0 !important;
            overflow: hidden !important;
        }
        /* å…¶ä»– CSS (channel-category-header, channel-item ç­‰) ä¿æŒä¸è®Š */
        .channel-category-header { padding: 15px 0 10px 0; font-size: 1.05em; font-weight: 700; color: var(--discord-text-primary); text-transform: uppercase; border-bottom: 1px solid var(--discord-bg-light); margin-bottom: 10px; display: flex; align-items: center; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .channel-category-header .category-icon { font-size: 1.25em; margin-right: 8px; color: var(--accent-color1); }
        .channel-item { display: flex; align-items: center; padding: 7px 10px; border-radius: 4px; color: var(--discord-channel-text); font-weight: 500; font-size: 0.98em; cursor: pointer; margin-bottom: 2px; transition: background-color 0.15s ease-out, color 0.15s ease-out; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .channel-item:hover { background-color: var(--discord-channel-hover-bg); color: var(--discord-text-primary); }
        .channel-item.active { background-color: var(--discord-active-channel-bg); color: var(--discord-text-primary); font-weight: bold; }
        .channel-item.completed .channel-name-text:after { content: " âœ”ï¸"; color: var(--highlight-green); font-size: 0.9em; margin-left: 5px; }
        .channel-icon { margin-right: 8px; color: var(--discord-text-muted); min-width: 18px; font-size: 1em; }

        /* --- ä¸»å…§å®¹å€æ¨£å¼ --- */
        .main-content-area { flex-grow: 1; background-color: var(--discord-bg-medium); display: flex; flex-direction: column; overflow: hidden; height: 100vh; /* å¼·åˆ¶é«˜åº¦ */ }
        .content-header { height: 50px; padding: 0 18px; display: flex; align-items: center; font-size: 17px; font-weight: 600; border-bottom: 1px solid var(--discord-bg-darkest); box-shadow: 0 1px 0 rgba(0,0,0,0.2); flex-shrink: 0; }
        .content-header .header-icon-placeholder { margin-right: 10px; display: flex; align-items: center; justify-content: center; width: 30px; height: 30px; font-size: 1.2em; }
        .content-header .header-icon-placeholder .channel-icon { font-size: 1.3em; opacity: 0.8; }
        .content-header .dm-avatar-header { width: 30px; height: 30px; background-color: var(--accent-color1); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1em; color: white; }
        .content-body { padding: 25px 30px; overflow-y: auto; flex-grow: 1; scrollbar-width: thin; scrollbar-color: var(--discord-scrollbar-thumb) var(--discord-scrollbar-track); font-size: 1em; line-height: 1.8; }
        .content-section { margin-bottom: 25px; padding: 20px; background-color: var(--discord-bg-dark); border-radius: 5px; }
        .content-section h3 { color: var(--discord-text-primary); font-size: 1.4em; margin-top: 0; margin-bottom: 15px; border-bottom: 1px solid var(--discord-bg-light); padding-bottom: 10px; }
        .content-section h3.channel-title, .content-section h4.channel-title { font-size: 1.3em; font-weight: 500; color: var(--discord-text-primary); margin-top: 20px; margin-bottom: 10px; padding-bottom: 5px; border-bottom: none; }
        .content-section h3.channel-title:first-child, .content-section h4.channel-title:first-child { margin-top: 0; }
        .content-section h3.channel-title:before, .content-section h4.channel-title:before { content: "# "; color: var(--discord-text-muted); font-weight: bold; margin-right: 4px; }
        .content-section p, .content-section li { color: var(--discord-text-secondary); margin-bottom: 10px; font-size: 1.05em; }
        .content-section ul, .content-section ol { padding-left: 30px; }
        .content-section strong.highlight { color: var(--accent-color1); font-weight: bold; }
        .content-section .important-note { color: #faa61a; font-weight: bold; }
        .content-section .architect-warning { display: block; margin-top: 10px; color: #faa61a; font-weight: bold; }
        .message-group { margin-bottom: 18px; }
        .message { display: flex; align-items: flex-start; padding: 2px 0; }
        .message-avatar { width: 42px; height: 42px; margin-right: 18px; font-size: 1.1em; border-radius: 50%; background-color: var(--accent-color1); flex-shrink: 0; display:flex; align-items:center; justify-content:center; font-weight:bold; color:white; }
        .message-avatar.kua { background-color: #7289da; }
        .message-content { flex-grow: 1; }
        .message-header { display: flex; align-items: baseline; margin-bottom: 4px; }
        .message-username { font-weight: 500; color: var(--discord-text-primary); margin-right: 8px; font-size: 1.05em;}
        .message-username.kua { color: #9099dd; }
        .message-timestamp { font-size: 0.8em; color: var(--discord-text-muted); }
        .message-text { color: var(--discord-text-primary); line-height: 1.45rem; font-size:1.05em;}
        .message-text p { margin-bottom: 5px !important; }
        .completion-toast { display: none; position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); background-color: var(--highlight-green); color: white; padding: 15px 25px; border-radius: 8px; z-index: 2000; font-size: 1.1em; box-shadow: 0 4px 10px rgba(0,0,0,0.2); animation: slideUpFadeOut 3.5s forwards; }
        @keyframes slideUpFadeOut { 0% { bottom: -60px; opacity: 0; } 15% { bottom: 30px; opacity: 1; } 85% { bottom: 30px; opacity: 1; } 100% { bottom: -60px; opacity: 0; } }
        @media (max-width: 768px) { body { font-size: 14px; } .channels-panel:not(.collapsed) { width: 220px; } .channels-panel.collapsed { width: 50px; } .server-name-header { font-size: 16px; padding: 0 8px 0 12px;} .panel-toggle-button { font-size: 1.4em; padding: 5px;} .channels-panel.collapsed .server-name-header { justify-content: center; } .content-header {font-size: 15px; padding: 0 12px;} .content-body {padding: 15px 20px;} }

    </style>
</head>
<body>

    <div class="discord-app-layout">
        <div id="serverList" class="server-list"></div>
        <div id="channelsPanelEl" class="channels-panel">
            <div class="server-name-header">
                <span id="serverNameTextEl">å¯å¯å†’éšªå³¶æŒ‡å—</span>
                <button id="panelToggleButtonEl" class="panel-toggle-button">Â«</button>
            </div>
            <div id="channelList" class="channel-list-container"></div>
        </div>
        <div class="main-content-area">
            <div id="contentHeader" class="content-header">
                <span class="header-icon-placeholder"><span class="channel-icon">#</span></span>
                <span id="currentChannelName"></span>
            </div>
            <div id="contentBody" class="content-body"></div>
        </div>
    </div>
    <div id="completionToast" class="completion-toast"></div>

    <script>
        // --- JavaScript è…³æœ¬ ---
        const servers = [
            { id: 'guide', name: 'å¯å¯å†’éšªå³¶æŒ‡å—', icon: 'ğŸï¸', type: 'guide' },
            { id: 'brio', name: 'èˆ‡å¸ƒé‡Œæ­çš„å°è©±', icon: 'ğŸ‘¨â€ğŸ³', type: 'dialogue' }
        ];

        const guideTopics = [
            // ... (æ‰€æœ‰ guideTopics çš„æ•¸æ“šï¼Œç¢ºä¿æ–‡æœ¬ç„¡èª¤ï¼Œ#è™Ÿæ¨™é¡Œå·²ä¿®æ­£ï¼Œç°¡é«”å­—å·²ä¿®æ­£) ...
            // ä¾‹å¦‚ï¼Œç¢ºä¿ island_facilities_others çš„ content ä¸­ architect-warning æ˜¯æ­£ç¢ºçš„
            {
                id: 'welcome', category: 'æ­¡è¿ä¾†åˆ°å¯å¯å†’éšªå³¶', categoryIcon: 'ğŸ‘‹', icon: '#', name: 'é–‹å§‹æ¢ç´¢ä¹‹æ—…',
                content: `...`, isCompleted: false
            },
            {
                id: 'discord_connection', category: 'ç¬¬å£¹ç« ï¼šDiscord ç³»çµ±', categoryIcon: 'ğŸ–¥ï¸', icon: '#', name: 'Discord é€£æ¥èˆ‡æ“ä½œæ•™å­¸',
                content: `...`, isCompleted: false
            },
            {
                id: 'island_facilities_worldtree', category: 'ç¬¬è²³ç« ï¼šå¯å¯å†’éšªå³¶', categoryIcon: 'ğŸï¸', icon: '#', name: 'ä¸–ç•Œæ¨¹è¨­æ–½',
                content: `...`, isCompleted: false
            },
            {
                id: 'island_facilities_others', category: 'ç¬¬è²³ç« ï¼šå¯å¯å†’éšªå³¶', icon: '#', name: 'å…¶ä»–é‡è¦è¨­æ–½',
                content: `
                    <div class="content-section">
                        <h3 class="channel-title">å¯å¯å†’éšªå³¶äº‹å‹™ä¸­å¿ƒ</h3>
                        <ul>
                            <li><strong>è¨±é¡˜æ± :</strong> ç”¨ä¾†è¨±é¡˜ï¼Œä¸å®šæ™‚æœƒæœ‰æŠ½ç (è‹¥æ²’æœ‰ç¶“è²»å®ƒå°±æ˜¯å€‹æ± å¡˜ ğŸ˜‰)ã€‚</li>
                            <li><strong>èƒ½é‡çµ±è¨ˆ:</strong> åœ¨ç‡ŸéšŠæœŸé–“ï¼Œæœƒç”¨ä¾†é—œå¿ƒå¤§å®¶çš„é¤é£Ÿç‹€æ…‹ã€‚</li>
                        </ul>
                    </div>
                    <div class="content-section">
                        <h3 class="channel-title">ç”œé»å˜°å˜°å–³å–³</h3>
                        <p>è‡ªç”±äº¤è«‡çš„ç©ºé–“ï¼Œæœ‰è¨±å¤šæ–‡å­—èŠå¤©å®¤ (#) å’ŒèªéŸ³èŠå¤©å®¤ (ğŸ”Š)ã€‚æœ‰äº›å† æœ‰ç‰¹å®šè‚¡åç¨±çš„æˆ¿é–“ï¼Œå‰‡åªæœ‰è©²è‚¡çš„æˆå“¡æ‰èƒ½çœ‹åˆ°å’Œé€²å…¥ã€‚</p>
                    </div>
                     <div class="content-section">
                        <h3 class="channel-title">èª¿æŸ¥å“¡èšé›†åœ° & å°ç”œé»èšè½</h3>
                        <p>ç³»çµ±ç²¾éˆï¼šã€Œé€™æ˜¯ä½ å’Œç®¡ç†å“¡ä¹‹é–“çš„<strong class="highlight">ç§˜å¯†é€šè¨Šé »é“</strong>ï¼ã€</p>
                        <ul>
                            <li><strong>éš±ç§ç¬¬ä¸€:</strong> <strong class="highlight">åªæœ‰ä½ è‡ªå·±èƒ½çœ‹åˆ°å’Œé€²å…¥</strong>å°ˆå±¬ç©ºé–“ã€‚éœ€èº«ä»½èªè­‰é–‹é€šã€‚</li>
                            <li><strong>é‡è¦è¨Šæ¯:</strong> ç©ºé–“å…§æœ‰ä¸‰å‰‡é‡è¦è¨Šæ¯ (åŒ…å«<strong class="highlight">å°ç”œé»å¤¥ä¼´</strong>åŠåŒ¿åèŠå¤©é€£çµ)ã€‚</li>
                            <li><span class="important-note">çµ•å°ä¿å¯†äº‹é …:</span> Discord ä¸­<strong class="highlight">é»‘è‰²èƒŒæ™¯æ¨™ç¤º</strong>çš„å…§å®¹ (åŒ¿åçƒ˜ç„™åŠè™Ÿç¢¼(Line)ã€é è¨­å°ç”œé»åã€æ‚¨çš„å°ç”œé») <strong class="highlight">åš´ç¦å¤–æ´©</strong>ï¼</li>
                            <li><strong>å“¡å·¥æ©Ÿå™¨äºº & å•†å“:</strong> å¯ä½¿ç”¨å“¡å·¥2æŒ‡ä»¤è³¼ç‰© (éœ€å…ˆåŠ å€¼)ã€‚<p class="architect-warning important-note">çµ¦ç”œé»å»ºç¯‰å¸«çš„æé†’: ä½¿ç”¨ã€Œé€ç¦®ç‰©ã€åŠŸèƒ½æ™‚ï¼Œå°æ–¹æœƒç›´æ¥æ”¶åˆ°é€šçŸ¥ï¼Œæ‰€ä»¥è«‹ä¸è¦ç”¨é€™å€‹åŠŸèƒ½ä¾†çµ¦ä½ è² è²¬çš„å°ç”œé»é€ç¦®å“¦ï¼</p></li>
                        </ul>
                    </div>
                `,
                isCompleted: false
            },
            {
                id: 'island_covenant', category: 'ç¬¬åƒç« ï¼šå¯å¯å†’éšªå³¶ç´„å®š', categoryIcon: 'ğŸ“œ', icon: '#', name: 'ç´„å®šæ ¸å¿ƒç²¾ç¥èˆ‡æ¢æ¬¾',
                content: `...`, isCompleted: false
            },
            {
                id: 'island_notes_detail', category: 'é™„è¨»ï¼šå¯å¯å†’éšªå³¶é ˆçŸ¥', categoryIcon: 'ğŸ“Œ', icon: '#', name: 'å¯å¯å†’éšªå³¶é ˆçŸ¥ (é»ƒé‡‘å®ˆå‰‡)',
                content: `...`, isCompleted: false
            },
            {
                id: 'manager_words', category: 'æœ€çµ‚ç« ï¼šå³¶å¶¼çš„æº«åº¦èˆ‡ç¥ç¦', categoryIcon: 'ğŸ’–', icon: '#', name: 'ç®¡ç†å“¡çš„ç¥ç¦èˆ‡æœŸç›¼',
                content: `...`, isCompleted: false
            }
        ];
         // !! è«‹å°‡ä¸Šé¢çœç•¥çš„ guideTopics çš„ content å¾æ‚¨ä¹‹å‰æ­£ç¢ºçš„ç‰ˆæœ¬è¤‡è£½éä¾† !!

        const brioDialogueContent = { /* (brioDialogueContent æ•¸æ“šä¿æŒæ­£ç¢º) */
            id: 'brio_main_dialogue',
            name: 'èˆ‡å¸ƒé‡Œæ­çš„è¨˜äº‹è¨˜éŒ„',
            icon: 'ğŸ‘¨â€ğŸ³',
            content: `
                <div class="message-group">
                    <div class="message">
                        <div class="message-avatar">å¸ƒ</div>
                        <div class="message-content">
                            <div class="message-header">
                                <span class="message-username">å¸ƒé‡Œæ­</span>
                                <span class="message-timestamp">å¯å¯æ›† æŸå¹´æŸæœˆæŸæ—¥ - é—œæ–¼ã€Šé’æ˜¥ã€‹</span>
                            </div>
                            <div class="message-text">
                                <p>ã€Œæ­²æœˆæ‚ æ‚ ï¼Œè¡°å¾®åªåŠè‚Œè†šï¼Œç†±å¿±æ‹‹å»ï¼Œé ¹å»¢å¿…è‡³éˆé­‚ã€‚ã€<br>â€”â€”å¡ç¹†çˆ¾Â·å„çˆ¾æ›¼ã€Šé’æ˜¥ã€‹</p>
                                <p>å®å®å®é¬†ï¼Œæ˜¯é€™å°±æ˜¯å†èªªä½ ï¼Œä¸åªçš®è†šé¬†é¬†çš„ï¼Œé‚„é ¹å»¢åˆ°äº†éˆé­‚ã€‚</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="message-group">
                    <div class="message">
                        <div class="message-avatar kua">å®</div>
                        <div class="message-content">
                            <div class="message-header">
                                <span class="message-username kua">å®å®å®é¬†</span>
                                <span class="message-timestamp">ç‰‡åˆ»ä¹‹å¾Œ</span>
                            </div>
                            <div class="message-text">
                                <p>åœ¨å•¦ï¼Œå¹¹ã€‚</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="message-group">
                    <div class="message">
                        <div class="message-avatar">å¸ƒ</div>
                        <div class="message-content">
                            <div class="message-header">
                                <span class="message-username">å¸ƒé‡Œæ­</span>
                                <span class="message-timestamp">å¯å¯æ›† å¦ä¸€å¹´æŸæœˆæŸæ—¥ - é—œæ–¼ã€Šçœ‹ä¸è¦‹çš„åŸå¸‚ã€‹</span>
                            </div>
                            <div class="message-text">
                                <p>ã€Œç”Ÿéˆçš„åœ°ç„ï¼Œä¸æ˜¯ä¸€å€‹å³å°‡ä¾†è‡¨çš„åœ°æ–¹ï¼›å¦‚æœçœŸæœ‰ä¸€å€‹åœ°ç„ï¼Œå®ƒå·²ç¶“å°±åœ¨é€™å…’å­˜åœ¨äº†ï¼Œé‚£æ˜¯æˆ‘å€‘æ¯å¤©ç”Ÿæ´»å…¶é–“çš„åœ°ç„ï¼Œæ˜¯æˆ‘å€‘èšåœ¨ä¸€èµ·è€Œå½¢æˆçš„åœ°ç„ã€‚ã€<br>â€”â€”å¡çˆ¾ç¶­è«¾ã€Šçœ‹ä¸è¦‹çš„åŸå¸‚ã€‹</p>
                                <p>ä½ èƒ½å¤ æƒ³åƒä¸€å †ç”œé»èšåœ¨ä¸€èµ·å—ï¼Ÿé‚£ç°¡ç›´æ˜¯å€‹å¤©å ‚ã€‚</p>
                            </div>
                        </div>
                    </div>
                </div>
                 <div class="message-group">
                    <div class="message">
                        <div class="message-avatar">å¸ƒ</div>
                        <div class="message-content">
                            <div class="message-header">
                                <span class="message-username">å¸ƒé‡Œæ­</span>
                                <span class="message-timestamp">å¯å¯æ›† è¿‘æœŸ - é—œæ–¼å¥¶é¾</span>
                            </div>
                            <div class="message-text">
                                <p>å¥¶é¾å°±æ˜¯æ²’æœ‰è…®ç´…ã€è€³æœµåŠé–ƒé›»å½¢ç‹€å°¾å·´çš„çš®å¡ä¸˜ã€‚</p>
                                <p><em style="color:var(--discord-text-muted); font-size:0.9em;">(ç²¾éˆç”»å¤–éŸ³ï¼šé€™å°±æ˜¯è‘—åçš„å¥¶é¾å‚³èªªç”±ä¾†ï¼XD)</em></p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="content-section" style="background-color:var(--discord-bg-medium); border: 1px solid var(--discord-bg-light);">
                     <h3>é—œæ–¼å¸ƒé‡Œæ­çš„æ›´å¤šæ•…äº‹ (æ­·å²ç‰‡æ®µ)</h3>
                     <p>åœ¨å¯å¯æ›†127å¹´ï¼Œå³¶ä¸Šå°±æœ‰äº†é€™ä½å‚³å¥‡çš„ç”œé»å»ºç¯‰å¸«â€”â€”å¸ƒé‡Œæ­ (Brio)ã€‚ä»–ä¸åªæ˜¯è£½ä½œç”œé»ï¼Œæ›´æ˜¯å°ç”œé»å€‘çš„å®ˆè­·è€…ã€‚ä»–ç”¨å¥¶æ²¹èˆ¬æº«æš–çš„é›™æ‰‹ï¼Œç‚ºæ¯å€‹å³å°‡èª•ç”Ÿçš„ç”œé»çŒæ³¨éˆé­‚ï¼Œè¼•è²å°å®ƒå€‘èªªï¼šã€Œæ­¡è¿ä¾†åˆ°ä¸–ç•Œï¼Œä½ æº–å‚™å¥½æ¢ç´¢è‡ªå·±çš„ç”œç¾äººç”Ÿäº†å—ï¼Ÿã€</p>
                     <p>å¸ƒé‡Œæ­æ·±çŸ¥æ¯å€‹ç”œé»çš„ç¨ç‰¹ã€‚ä»–æ›¾å°ç„¦æ…®çš„è‰è“æ³¡èŠ™èªªï¼šã€Œä½ ä¸éœ€è¦è®Šå¾—é…¥è„†ï¼ŒæŸ”è»Ÿä¹Ÿæ˜¯ä¸€ç¨®å¯æ„›çš„ç‰¹è³ªã€‚ã€ä»–ä¹Ÿé¼“å‹µè†½æ€¯çš„å¯å¯å¯é Œï¼ˆä¹Ÿå°±æ˜¯æˆ‘å€‘å‰›å‰›æåˆ°çš„ã€å®å®å®é¬†ã€ï¼ï¼‰ï¼šã€ä½ ç¶“éå±¤å±¤æŠ˜ç–Šï¼Œæ‰æœ‰äº†ç¾åœ¨çš„æ¨£å­ï¼Œä¸æœƒé€™éº¼å®¹æ˜“å®æ‰çš„ã€‚ã€ä»–çš„ä¿¡å¿µæ˜¯å¹«åŠ©ç”œé»ç™¼æ˜è‡ªå·±çš„åƒ¹å€¼ï¼Œè€Œéæ”¹è®Šå®ƒå€‘ã€‚</p>
                </div>
            `,
            isCompleted: false
        };

        document.addEventListener('DOMContentLoaded', () => {
            const serverListEl = document.getElementById('serverList');
            const channelsPanelEl = document.getElementById('channelsPanelEl');
            const panelToggleButtonEl = document.getElementById('panelToggleButtonEl');
            const channelListEl = document.getElementById('channelList');
            const serverNameTextEl = document.getElementById('serverNameTextEl');
            const contentHeaderEl = document.getElementById('contentHeader');
            const currentChannelNameEl = document.getElementById('currentChannelName');
            const contentBodyEl = document.getElementById('contentBody');
            const completionToastEl = document.getElementById('completionToast');

            let activeServerId = 'guide';
            let activeChannelId = 'welcome';
            let isChannelPanelCollapsed = false;

            function toggleChannelsPanel() {
                isChannelPanelCollapsed = !isChannelPanelCollapsed;
                if (channelsPanelEl) {
                    channelsPanelEl.classList.toggle('collapsed', isChannelPanelCollapsed);
                }
                if (panelToggleButtonEl) {
                    panelToggleButtonEl.textContent = isChannelPanelCollapsed ? 'â˜°' : 'Â«';
                }
            }

            if(panelToggleButtonEl && channelsPanelEl) {
                panelToggleButtonEl.addEventListener('click', toggleChannelsPanel);
            }

            function renderServers() {
                if (!serverListEl) return;
                serverListEl.innerHTML = '';
                servers.forEach(server => {
                    const serverIconDiv = document.createElement('div');
                    serverIconDiv.classList.add('server-icon');
                    serverIconDiv.textContent = server.icon;
                    serverIconDiv.dataset.id = server.id;
                    if (server.id === activeServerId) {
                        serverIconDiv.classList.add('active');
                    }
                    serverIconDiv.addEventListener('click', () => selectServer(server.id));
                    serverListEl.appendChild(serverIconDiv);
                });
            }

            function renderChannelsOrDialogueTitle() {
                if (!channelListEl || !serverNameTextEl || !panelToggleButtonEl) return;
                channelListEl.innerHTML = '';
                const currentServer = servers.find(s => s.id === activeServerId);
                serverNameTextEl.textContent = currentServer ? currentServer.name : 'æœªçŸ¥å€åŸŸ';

                panelToggleButtonEl.style.display = 'flex'; // é»˜èªé¡¯ç¤ºæŒ‰éˆ•

                if (activeServerId === 'guide') {
                    let lastCategory = null;
                    guideTopics.forEach(topic => {
                        if (topic.category && topic.category !== lastCategory) {
                            const categoryDiv = document.createElement('div');
                            categoryDiv.classList.add('channel-category-header');
                            categoryDiv.innerHTML = `<span class="category-icon">${topic.categoryIcon || ''}</span>${topic.category}`;
                            channelListEl.appendChild(categoryDiv);
                            lastCategory = topic.category;
                        }

                        const channelDiv = document.createElement('div');
                        channelDiv.classList.add('channel-item');
                        channelDiv.dataset.id = topic.id;
                        if (topic.id === activeChannelId) {
                            channelDiv.classList.add('active');
                        }
                        const channelNameSpan = document.createElement('span');
                        channelNameSpan.classList.add('channel-name-text');
                        channelNameSpan.textContent = topic.name;

                        channelDiv.innerHTML = `<span class="channel-icon">${topic.icon || '#'}</span>`;
                        channelDiv.appendChild(channelNameSpan);

                        if (topic.isCompleted) {
                            channelDiv.classList.add('completed');
                        }

                        channelDiv.addEventListener('click', () => selectContentItem(topic.id, 'topic'));
                        channelListEl.appendChild(channelDiv);
                    });
                } else if (activeServerId === 'brio') {
                    // å¸ƒé‡Œæ­è¦–åœ–ä¸‹ï¼Œé »é“åˆ—è¡¨åªé¡¯ç¤ºä¸€å€‹ç¸½æ¨™é¡Œï¼Œæ”¶åˆæŒ‰éˆ•ä»ç„¶å¯ç”¨
                    const brioTitle = document.createElement('div');
                    brioTitle.classList.add('channel-category-header');
                    brioTitle.innerHTML = `<span class="category-icon">${brioDialogueContent.icon || 'ğŸ’¬'}</span>${brioDialogueContent.name}`;
                    channelListEl.appendChild(brioTitle);
                }
            }

            function selectServer(serverId) {
                if (!servers.find(s => s.id === serverId)) return;
                activeServerId = serverId;

                // åˆ‡æ›ä¼ºæœå™¨æ™‚ï¼Œä¿æŒç”¨æˆ¶å°é »é“é¢æ¿çš„æ”¶åˆåå¥½
                // (é™¤éæœ‰ç‰¹å®šé‚è¼¯è¦æ±‚åœ¨åˆ‡æ›åˆ°æŸä¼ºæœå™¨æ™‚å¼·åˆ¶å±•é–‹/æ”¶åˆ)
                if (channelsPanelEl) {
                     channelsPanelEl.classList.toggle('collapsed', isChannelPanelCollapsed);
                }
                if (panelToggleButtonEl) {
                     panelToggleButtonEl.textContent = isChannelPanelCollapsed ? 'â˜°' : 'Â«';
                }


                renderServers();

                if (activeServerId === 'guide') {
                    activeChannelId = guideTopics[0] ? guideTopics[0].id : 'welcome';
                    selectContentItem(activeChannelId, 'topic');
                } else if (activeServerId === 'brio') {
                    activeChannelId = brioDialogueContent.id;
                    selectContentItem(activeChannelId, 'dialogue');
                }
                renderChannelsOrDialogueTitle(); // æ›´æ–°ä¸­é–“é¢æ¿å’Œæ”¶åˆæŒ‰éˆ•ç‹€æ…‹
            }

            function selectContentItem(itemId, type) {
                // ... (èˆ‡ä¹‹å‰ç›¸åŒ) ...
                 activeChannelId = itemId;
                let selectedItem;
                let headerIconHtml = '<span class="channel-icon">#</span>';

                if (type === 'topic') {
                    selectedItem = guideTopics.find(t => t.id === itemId);
                    if(selectedItem) headerIconHtml = `<span class="channel-icon">${selectedItem.icon || '#'}</span>`;
                } else if (type === 'dialogue') {
                    selectedItem = brioDialogueContent;
                    if(selectedItem) headerIconHtml = `<div class="dm-avatar-header">${selectedItem.icon || selectedItem.name.charAt(0)}</div>`;
                }

                if (selectedItem && contentHeaderEl && currentChannelNameEl && contentBodyEl) {
                    let headerIconPlaceholder = contentHeaderEl.querySelector('.header-icon-placeholder');
                    if (!headerIconPlaceholder) {
                        headerIconPlaceholder = document.createElement('span');
                        headerIconPlaceholder.classList.add('header-icon-placeholder');
                        contentHeaderEl.insertBefore(headerIconPlaceholder, currentChannelNameEl);
                    }
                    headerIconPlaceholder.innerHTML = headerIconHtml;
                    currentChannelNameEl.textContent = (type === 'topic' && selectedItem) ? selectedItem.name : (selectedItem ? selectedItem.name : 'æœªçŸ¥å…§å®¹');


                    contentBodyEl.innerHTML = selectedItem.content;
                    contentBodyEl.scrollTop = 0;

                    if (!selectedItem.isCompleted) {
                        selectedItem.isCompleted = true;
                        checkAllCompleted();
                    }
                    renderChannelsOrDialogueTitle();
                }
            }

            function checkAllCompleted() {
                // ... (èˆ‡ä¹‹å‰ç›¸åŒ) ...
                const allTopicsDone = guideTopics.every(topic => topic.isCompleted);
                const brioDone = brioDialogueContent.isCompleted;
                if (allTopicsDone && brioDone && completionToastEl) {
                    if (completionToastEl.style.display !== 'block') {
                        completionToastEl.style.display = 'block';
                        completionToastEl.style.animation = 'none';
                        completionToastEl.offsetHeight; /* trigger reflow */
                        completionToastEl.style.animation = '';
                        setTimeout(() => {
                            completionToastEl.style.display = 'none';
                        }, 3500);
                    }
                }
            }

            // åˆå§‹åŒ–
            const initialElements = [
                serverListEl, channelsPanelEl, panelToggleButtonEl, channelListEl,
                serverNameTextEl, contentHeaderEl, contentBodyEl, completionToastEl
            ];
            if (initialElements.every(el => el)) {
                renderServers();
                selectServer(activeServerId);
            } else {
                console.error("ä¸€å€‹æˆ–å¤šå€‹å¿…è¦çš„ DOM å…ƒç´ æœªæ‰¾åˆ°ï¼ŒéŠæˆ²ç„¡æ³•åˆå§‹åŒ–ã€‚è«‹æª¢æŸ¥HTMLä¸­çš„IDã€‚");
                 initialElements.forEach((el, index) => {
                    if (!el) console.error(`Element with expected ID '${['serverList', 'channelsPanelEl', 'panelToggleButtonEl', 'channelList', 'serverNameTextEl', 'contentHeader', 'contentBody', 'completionToast'][index]}' not found.`);
                });
            }
        });
    </script>
</body>
</html>
