<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯å¯å†’éšªå³¶ Discord æŒ‡å—æ¨¡æ“¬</title>
    <style>
        :root {
            --discord-bg-darkest: #202225;
            --discord-bg-dark: #2f3136;
            --discord-bg-medium: #36393f;
            --discord-bg-light: #40444b;
            --discord-header: #202225;
            --discord-text-primary: #dcddde;
            --discord-text-secondary: #b9bbbe;
            --discord-text-muted: #72767d;
            --discord-text-link: #0096cf;
            --discord-channel-text: #b9bbbe;
            --discord-channel-hover-bg: #3a3c43;
            --discord-active-channel-bg: var(--discord-bg-light);
            --discord-mention-bg: rgba(88, 101, 242, 0.3);
            --discord-scrollbar-thumb: var(--discord-bg-darkest);
            --discord-scrollbar-track: var(--discord-bg-dark);
            --highlight-green: #43b581;
            --accent-color1: #d4a373;
            --panel-transition: width 0.3s ease-in-out;
        }

        body {
            font-family: 'Whitney', 'Helvetica Neue', Helvetica, Arial, sans-serif;
            line-height: 1.7; margin: 0; background-color: var(--discord-bg-darkest);
            color: var(--discord-text-primary); display: flex; height: 100vh;
            overflow: hidden; font-size: 16px;
        }

        .discord-app-layout { display: flex; width: 100%; height: 100%; }
        .server-list {
            width: 72px; background-color: var(--discord-bg-darkest); padding: 12px 0;
            display: flex; flex-direction: column; align-items: center; flex-shrink: 0;
        }
        .server-icon {
            width: 48px; height: 48px; background-color: var(--discord-bg-light);
            border-radius: 50%; margin-bottom: 8px; display: flex; align-items: center;
            justify-content: center; font-size: 1.8em; color: var(--discord-text-primary);
            cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            transition: border-radius 0.15s ease-out, background-color 0.15s ease-out;
        }
        .server-icon:hover { border-radius: 16px; background-color: var(--accent-color1); }
        .server-icon.active { border-radius: 16px; background-color: var(--accent-color1); }

        .channels-panel {
            width: 280px;
            background-color: var(--discord-bg-dark); display: flex;
            flex-direction: column; flex-shrink: 0;
            transition: var(--panel-transition); 
            position: relative;
            overflow: hidden; 
        }
        .channels-panel.collapsed {
            width: 60px;
        }

        .server-name-header {
            height: 50px; padding: 0 10px;
            display: flex; align-items: center;
            justify-content: space-between;
            font-weight: 600; font-size: 18px;
            color: var(--discord-text-primary); border-bottom: 1px solid var(--discord-bg-darkest);
            box-shadow: 0 1px 0 rgba(0,0,0,0.2), 0 1.5px 0 rgba(0,0,0,0.05), 0 2px 0 rgba(0,0,0,0.05);
            flex-shrink: 0; overflow: hidden;
            transition: border-bottom-color 0.3s ease-in-out, box-shadow 0.3s ease-in-out; 
        }
        .server-name-text { 
            white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
            flex-grow: 1; margin-right: 5px; display: inline-block;
            opacity: 1; 
            max-width: calc(100% - 50px); 
            transition: opacity 0.15s ease-out, max-width 0.25s ease-in-out; 
        }
        .channels-panel.collapsed .server-name-text { 
            opacity: 0;          
            max-width: 0;        
            margin-right: 0;     
            padding: 0;          
            pointer-events: none; 
        }
        .panel-toggle-button {
            background: none; border: none; color: var(--discord-text-muted);
            font-size: 1.6em; cursor: pointer; padding: 5px; line-height: 1;
            display: flex; align-items: center; justify-content: center;
            flex-shrink: 0; width: 40px; height: 40px; transition: color 0.2s;
        }
        .panel-toggle-button:hover { color: var(--discord-text-primary); }

        .channels-panel.collapsed .server-name-header {
            justify-content: center; 
            border-bottom-color: transparent; 
            box-shadow: none; 
        }

        .channel-list-container {
            padding: 18px 10px 18px 18px; overflow-y: auto; flex-grow: 1;
            scrollbar-width: thin; scrollbar-color: var(--discord-scrollbar-thumb) var(--discord-scrollbar-track);
            transition: opacity 0.2s ease-out 0.05s,
                        visibility 0s linear 0.25s,
                        height 0.3s ease-in-out,
                        padding 0.3s ease-in-out,
                        margin 0.3s ease-in-out;
            opacity: 1; visibility: visible; height: auto;
        }
        .channels-panel.collapsed .channel-list-container {
            opacity: 0; visibility: hidden; pointer-events: none;
            height: 0 !important; padding: 0 !important; margin: 0 !important; overflow: hidden !important;
        }

        .channel-category-header { padding: 15px 0 10px 0; font-size: 1.05em; font-weight: 700; color: var(--discord-text-primary); text-transform: uppercase; border-bottom: 1px solid var(--discord-bg-light); margin-bottom: 10px; display: flex; align-items: center; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .channel-category-header .category-icon { font-size: 1.25em; margin-right: 8px; color: var(--accent-color1); }
        .channel-item { display: flex; align-items: center; padding: 7px 10px; border-radius: 4px; color: var(--discord-channel-text); font-weight: 500; font-size: 0.98em; cursor: pointer; margin-bottom: 2px; transition: background-color 0.15s ease-out, color 0.15s ease-out; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .channel-item:hover { background-color: var(--discord-channel-hover-bg); color: var(--discord-text-primary); }
        .channel-item.active { background-color: var(--discord-active-channel-bg); color: var(--discord-text-primary); font-weight: bold; }
        .channel-item.completed .channel-name-text:after { content: " âœ”ï¸"; color: var(--highlight-green); font-size: 0.9em; margin-left: 5px; }
        .channel-icon { margin-right: 8px; color: var(--discord-text-muted); min-width: 18px; font-size: 1em; }
        
        .main-content-area { flex-grow: 1; background-color: var(--discord-bg-medium); display: flex; flex-direction: column; overflow: hidden; height: 100vh; }
        
        .content-header { 
            height: 50px; padding: 0 18px; display: flex; align-items: center; 
            font-size: 17px; font-weight: 600; 
            border-bottom: 1px solid var(--discord-bg-darkest); 
            box-shadow: 0 1px 0 rgba(0,0,0,0.2); flex-shrink: 0;
            overflow: hidden; /* Added to prevent children from breaking layout */
        }
        .content-header .header-icon-placeholder { 
            margin-right: 10px; display: flex; align-items: center; justify-content: center; 
            width: 30px; height: 30px; font-size: 1.2em;
            flex-shrink: 0; /* Prevent icon from shrinking */
        }
        .content-header .header-icon-placeholder .channel-icon { font-size: 1.3em; opacity: 0.8; }
        .content-header .dm-avatar-header { 
            width: 30px; height: 30px; background-color: var(--accent-color1); 
            border-radius: 50%; display: flex; align-items: center; justify-content: center; 
            font-size: 1em; color: white;
            flex-shrink: 0; /* Prevent avatar from shrinking */
        }
        /* Styling for the current channel name in the header to prevent stacking */
        #currentChannelName {
            flex-grow: 1; /* Allow it to take available space */
            white-space: nowrap; /* Prevent text from wrapping to the next line */
            overflow: hidden; /* Hide text that overflows the container */
            text-overflow: ellipsis; /* Display an ellipsis (...) for overflowed text */
            min-width: 0; /* Important for flex items to allow shrinking below content size */
        }

        .content-body-wrapper {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden; /* Important: contains scrollable body and fixed input */
        }
        .content-body {
            padding: 20px 25px;
            overflow-y: auto; /* Scrollable content */
            flex-grow: 1; /* Takes up available vertical space */
            scrollbar-width: thin; scrollbar-color: var(--discord-scrollbar-thumb) var(--discord-scrollbar-track);
            font-size: 1em; line-height: 1.7;
        }
        .content-section { margin-bottom: 20px; padding: 18px; background-color: var(--discord-bg-dark); border-radius: 5px; }
        .content-section h3 { color: var(--discord-text-primary); font-size: 1.35em; margin-top: 0; margin-bottom: 12px; border-bottom: 1px solid var(--discord-bg-light); padding-bottom: 8px; }
        .content-section h3.channel-title, .content-section h4.channel-title { font-size: 1.25em; font-weight: 500; color: var(--discord-text-primary); margin-top: 18px; margin-bottom: 8px; padding-bottom: 4px; border-bottom: none; }
        .content-section h3.channel-title:first-child, .content-section h4.channel-title:first-child { margin-top: 0; }
        .content-section h3.channel-title:before, .content-section h4.channel-title:before { content: "# "; color: var(--discord-text-muted); font-weight: bold; margin-right: 4px; }
        .content-section p, .content-section li { color: var(--discord-text-secondary); margin-bottom: 8px; font-size: 1em; }
        .content-section ul, .content-section ol { padding-left: 25px; }
        .content-section strong.highlight { color: var(--accent-color1); font-weight: bold; }
        .content-section .important-note { color: #faa61a; font-weight: bold; }
        .content-section .architect-warning { display: block; margin-top: 8px; color: #faa61a; font-weight: bold; }
        .message-group { margin-bottom: 15px; }
        .message { display: flex; align-items: flex-start; padding: 2px 0; }
        .message-avatar { width: 38px; height: 38px; margin-right: 15px; font-size: 1em; border-radius: 50%; background-color: var(--accent-color1); flex-shrink: 0; display:flex; align-items:center; justify-content:center; font-weight:bold; color:white; }
        .message-avatar.kua { background-color: #7289da; }
        .message-content { flex-grow: 1; }
        .message-header { display: flex; align-items: baseline; margin-bottom: 3px; }
        .message-username { font-weight: 500; color: var(--discord-text-primary); margin-right: 6px; font-size: 1em;}
        .message-username.kua { color: #9099dd; }
        .message-timestamp { font-size: 0.75em; color: var(--discord-text-muted); }
        .message-text { color: var(--discord-text-primary); line-height: 1.4rem; font-size:1em;}
        .message-text p { margin-bottom: 4px !important; }

        .discord-input-mock-wrapper {
            margin-top: auto; /* Pushes to bottom because .content-body-wrapper is flex-column and .content-body is flex-grow:1 */
            padding: 15px 20px 20px 20px;
            flex-shrink: 0; /* Prevent shrinking */
            background-color: var(--discord-bg-medium); /* Match parent background */
        }
        .discord-input-mock {
            background-color: var(--discord-bg-light);
            border-radius: 8px;
            padding: 10px 15px;
            display: flex;
            align-items: center;
            color: var(--discord-text-muted);
            /* Removed border-top as wrapper now has bg color, or add if desired */
            /* border-top: 1px solid var(--discord-bg-darkest); */
        }
        .discord-input-mock .input-placeholder { flex-grow: 1; padding-left: 8px; }
        .discord-input-mock .icon { font-size: 1.3em; color: var(--discord-text-secondary); cursor: default; margin: 0 5px; }

        .completion-toast {
            display: none; position: fixed; bottom: -70px; left: 50%;
            transform: translateX(-50%); background-color: var(--highlight-green);
            color: white; padding: 15px 25px; border-radius: 8px;
            z-index: 2000; font-size: 1.1em; box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            opacity: 0; 
        }
        .completion-toast.animate {
            display: block !important; animation-name: slideUpFadeOutToastAnimation;
            animation-duration: 3.5s; animation-fill-mode: forwards; 
            animation-timing-function: ease-in-out;
        }
        @keyframes slideUpFadeOutToastAnimation {
            0% { bottom: -70px; opacity: 0; }
            15% { bottom: 30px; opacity: 1; } 
            85% { bottom: 30px; opacity: 1; } 
            100% { bottom: -70px; opacity: 0; } 
        }
        @media (max-width: 768px) {
            body { font-size: 14px; }
            .channels-panel:not(.collapsed) { width: 220px; }
            .channels-panel.collapsed { width: 50px; }
            .server-name-header { font-size: 16px; padding: 0 8px 0 12px;}
            .panel-toggle-button { font-size: 1.4em; padding: 5px;}
            .content-header {font-size: 15px; padding: 0 12px;}
            #currentChannelName { /* Ensure responsiveness for smaller channel names too */
                 font-size: 15px; /* Match header font-size */
            }
            .content-body {padding: 15px;}
            .discord-input-mock-wrapper { padding: 10px 15px 15px 15px;} 
            .discord-input-mock { margin: 0;} 
        }
    </style>
</head>
<body>

    <div class="discord-app-layout">
        <div id="serverList" class="server-list"></div>
        <div id="channelsPanelEl" class="channels-panel">
            <div class="server-name-header">
                <span id="serverNameTextEl" class="server-name-text">å¯å¯å†’éšªå³¶æŒ‡å—</span>
                <button id="panelToggleButtonEl" class="panel-toggle-button">Â«</button>
            </div>
            <div id="channelList" class="channel-list-container"></div>
        </div>
        <div class="main-content-area">
            <div id="contentHeader" class="content-header">
                <span class="header-icon-placeholder"><span class="channel-icon">#</span></span>
                <span id="currentChannelName"></span> 
            </div>
            <div id="contentBodyWrapper" class="content-body-wrapper">
                <div id="contentBody" class="content-body">
                    {/* HTML content will be inserted here by JS */}
                </div>
            </div>
        </div>
    </div>
    <div id="completionToast" class="completion-toast">
        {/* Text updated in JS */}
    </div>

    <script>
        const servers = [
            { id: 'guide', name: 'å¯å¯å†’éšªå³¶æŒ‡å—', icon: 'ğŸï¸', type: 'guide' },
            { id: 'brio', name: 'èˆ‡å¸ƒé‡Œæ­çš„å°è©±', icon: 'ğŸ‘¨â€ğŸ³', type: 'dialogue' }
        ];

        const guideTopics = [
            { id: 'welcome', category: 'æ­¡è¿ä¾†åˆ°å¯å¯å†’éšªå³¶', categoryIcon: 'ğŸ‘‹', icon: '#', name: 'é–‹å§‹æ¢ç´¢ä¹‹æ—…', content: ` <div class="content-section"> <h3>ç³»çµ±ç²¾éˆçš„æ­¡è¿</h3> <p>ç³»çµ±ç²¾éˆï¼šã€Œå†æ¬¡æ­¡è¿ä½ ï¼Œå°ç”œé»ï¼å¾ˆé«˜èˆˆèƒ½æˆç‚ºä½ çš„åš®å°ã€‚ã€</p> <p>ã€Œé€™å€‹æŒ‡å—æ¨¡æ“¬å™¨å°‡å¸¶ä½ ç†Ÿæ‚‰å¯å¯å†’éšªå³¶ Discord ä¼ºæœå™¨çš„é‡è¦è³‡è¨Šã€‚é»æ“Šå·¦å´<strong class="highlight">ä¸åŒåœ–æ¨™</strong>å¯ä»¥åˆ‡æ›æŸ¥çœ‹ä¸»æŒ‡å—å…§å®¹æˆ–èˆ‡å¸ƒé‡Œæ­å¤§å¸«çš„å°è©±ã€‚åœ¨ä¸»æŒ‡å—ä¸­ï¼Œé»æ“Š<strong class="highlight">ã€é »é“ã€åˆ—è¡¨</strong>ï¼Œå°±å¯ä»¥æŸ¥çœ‹å°æ‡‰çš„å…§å®¹äº†ã€‚ã€</p> <p>ã€Œæº–å‚™å¥½äº†å—ï¼Ÿè®“æˆ‘å€‘é–‹å§‹æ¢ç´¢<strong class="highlight">å¯å¯å†’éšªå³¶æŒ‡å—</strong>å§ï¼ã€</p> <p style="margin-top: 20px;">å¦‚æœä½ æƒ³æŸ¥çœ‹å®Œæ•´çš„æŒ‡å—è©³ç´°å…§å®¹ï¼Œå¯ä»¥é»æ“Šé€™è£¡ï¼š<a href="https://drive.google.com/file/d/1gjRF8gfq2a2c-vxlLzZj79GNbplLLDZ3/view?usp=sharing" target="_blank" style="color:var(--discord-text-link); text-decoration:underline;">å®Œæ•´æŒ‡å—æ–‡ä»¶</a>ã€‚</p> </div> `, isCompleted: false },
            { id: 'discord_connection', category: 'ç¬¬å£¹ç« ï¼šDiscord ç³»çµ±', categoryIcon: 'ğŸ–¥ï¸', icon: '#', name: 'Discord é€£æ¥èˆ‡æ“ä½œæ•™å­¸', content: ` <div class="content-section"> <h3 class="channel-title">Discord ç’°å¢ƒå»ºç½®</h3> <p>ç³»çµ±ç²¾éˆï¼šã€Œè¦åŠ å…¥æˆ‘å€‘çš„å³¶å¶¼ï¼Œé¦–å…ˆä½ éœ€è¦ Discordï¼å®ƒå°±åƒæˆ‘å€‘çš„é­”æ³•é€šè¨Šæ°´æ™¶ã€‚ã€</p> <p>å–å¾—æ–¹å¼:</p> <ul> <li><strong>IOS è¨­å‚™:</strong> å‰å¾€ App Store æœå°‹ã€ŒDiscordã€æˆ–é»æ“Š <a href="https://apps.apple.com/us/app/discord-talk-play-hang-out/id985746746" target="_blank" style="color:var(--discord-text-link); text-decoration:underline;">æ­¤è™•å®‰è£</a>ã€‚</li> <li><strong>å®‰å“è¨­å‚™:</strong> å‰å¾€ Play å•†åº—æœå°‹ã€ŒDiscordã€æˆ–é»æ“Š <a href="https://play.google.com/store/apps/details?id=com.discord" target="_blank" style="color:var(--discord-text-link); text-decoration:underline;">æ­¤è™•å®‰è£</a>ã€‚</li> <li><strong>PC/Mac:</strong> å‰å¾€ç€è¦½å™¨æœå°‹ã€ŒDiscordã€æˆ–é»æ“Š <a href="https://discord.com/download" target="_blank" style="color:var(--discord-text-link); text-decoration:underline;">æ­¤è™•ä¸‹è¼‰</a>ã€‚</li> <li><strong>ç¶²é ç€è¦½:</strong> å‰å¾€ç€è¦½å™¨æœå°‹ã€ŒDiscordã€æˆ–ç›´æ¥è¨ªå• <a href="https://discord.com/app" target="_blank" style="color:var(--discord-text-link); text-decoration:underline;">discord.com/app</a>ã€‚</li> </ul> </div> <div class="content-section"> <h3 class="channel-title">Discord ç³»çµ±æ“ä½œ</h3> <p>ç³»çµ±ç²¾éˆï¼šã€Œç†Ÿæ‚‰ç•Œé¢å¾ˆé‡è¦å“¦ï¼ã€</p> <ul> <li><strong class="highlight">å°è¦½ - å·¦å´:</strong> é»æ“Šä¼ºæœå™¨åˆ—è¡¨æ—çš„ç®­é ­å¯çœ‹è¦‹é »é“åˆ—è¡¨ã€‚</li> <li><strong class="highlight">å°è¦½ - å³å´:</strong> ç³»çµ±è¨­å®šã€é€šçŸ¥ã€æœå°‹ç­‰ã€‚æˆå“¡ä¸Šç·šç‹€æ…‹ä¹Ÿæœƒé¡¯ç¤ºã€‚</li> <li><strong class="highlight">è¨Šæ¯æ“ä½œ - å·¦ä¸‹è§’ (+):</strong> æ–°å¢æŠ•ç¥¨ã€ä¸Šå‚³åœ–ç‰‡/æª”æ¡ˆ (æœ‰å¤§å°é™åˆ¶)ã€‚</li> <li><strong class="highlight">è¨Šæ¯æ“ä½œ - å·¦ä¸‹è§’ç¬¬äºŒå€‹åœ–æ¨™:</strong> å‚³é€æŒ‡ä»¤ (å³¶ä¸Šæœ‰ä¸‰ä½ç”œé»å»ºç¯‰å¸«å¯å¹«å¿™)ã€‚</li> <li><strong class="highlight">èŠå¤©å®¤é¡å‹:</strong> æ–‡å­—é »é“ (#) ç„¡æ³•èªéŸ³ï¼Œå¯æŠ•ç¥¨å‚³åœ–æ–‡ï¼›èªéŸ³é »é“ (ğŸ”Š) é»æ“Šå³é€²å…¥ï¼Œå¯åˆ†äº«ç•«é¢ï¼Œèª¿æ•´ä»–äººéŸ³é‡/ç¦éŸ³ (åƒ…å°è‡ªå·±æœ‰æ•ˆ)ã€‚</li> <li><strong class="highlight">å…¬é–‹æ€§:</strong> åˆ†ç‚ºã€Œå…¬é–‹ã€å’Œã€Œç§äººã€(éœ€æ¬Šé™/èº«ä»½çµ„)ã€‚</li> </ul> </div> `, isCompleted: false },
            { id: 'island_facilities_worldtree', category: 'ç¬¬è²³ç« ï¼šå¯å¯å†’éšªå³¶', categoryIcon: 'ğŸï¸', icon: '#', name: 'ä¸–ç•Œæ¨¹è¨­æ–½', content: ` <div class="content-section"> <h3 class="channel-title">çƒ˜ç„™å¤§å»³</h3> <p>ç³»çµ±ç²¾éˆï¼šã€Œé€™æ˜¯ä½ åˆæ¬¡æŠµé”çš„æº«é¦¨æˆ¿é–“ï¼Œç³»çµ±æœƒåœ¨é€™è£¡æ­¡è¿ä½ ï¼ã€</p> </div> <div class="content-section"> <h3 class="channel-title">ä¸–ç•Œæ¨¹-å¤©æ°£ä¸­å¿ƒ</h3> <p>é€™è£¡çš„å¤©æ°£å’Œ<strong class="highlight">ç¾å¯¦ä¸–ç•Œ</strong>åŒæ­¥å“¦ï¼æœ‰å¤©æ°£é å ±ã€é è­¦ç­‰åŠŸèƒ½ (ä½†è­¦å ±å¤ªåµï¼Œè¨Šæ¯é€šçŸ¥å·²è¢«ç®¡ç†å“¡é—œæ‰äº†)ã€‚</p> </div> <div class="content-section"> <h3 class="channel-title">ä¸–ç•Œæ¨¹-è³‡è¨Šä¸­å¿ƒ</h3> <p>æ‰€æœ‰é‡è¦çš„<strong class="highlight">ç³»çµ±æ¶ˆæ¯</strong>éƒ½æœƒåœ¨é€™è£¡å…¬å‘Šã€‚</p> </div> `, isCompleted: false },
            { id: 'island_facilities_others', category: 'ç¬¬è²³ç« ï¼šå¯å¯å†’éšªå³¶', icon: '#', name: 'å…¶ä»–é‡è¦è¨­æ–½', content: ` <div class="content-section"> <h3 class="channel-title">å¯å¯å†’éšªå³¶äº‹å‹™ä¸­å¿ƒ</h3> <ul> <li><strong>è¨±é¡˜æ± :</strong> ç”¨ä¾†è¨±é¡˜ï¼Œä¸å®šæ™‚æœƒæœ‰æŠ½ç (è‹¥æ²’æœ‰ç¶“è²»å®ƒå°±æ˜¯å€‹æ± å¡˜ ğŸï¸)ã€‚</li> <li><strong>èƒ½é‡çµ±è¨ˆ:</strong> åœ¨ç‡ŸéšŠæœŸé–“ï¼Œæœƒç”¨ä¾†é—œå¿ƒå¤§å®¶çš„é¤é£Ÿç‹€æ…‹ã€‚</li> </ul> </div> <div class="content-section"> <h3 class="channel-title">ç”œé»å˜°å˜°å–³å–³</h3> <p>è‡ªç”±äº¤è«‡çš„ç©ºé–“ï¼Œæœ‰è¨±å¤šæ–‡å­—èŠå¤©å®¤ (#) å’ŒèªéŸ³èŠå¤©å®¤ (ğŸ”Š)ã€‚æœ‰äº›å† æœ‰ç‰¹å®šè‚¡åç¨±çš„æˆ¿é–“ï¼Œå‰‡åªæœ‰è©²è‚¡çš„æˆå“¡æ‰èƒ½çœ‹åˆ°å’Œé€²å…¥ã€‚</p> </div> <div class="content-section"> <h3 class="channel-title">èª¿æŸ¥å“¡èšé›†åœ° & å°ç”œé»èšè½</h3> <p>ç³»çµ±ç²¾éˆï¼šã€Œé€™æ˜¯ä½ å’Œç®¡ç†å“¡ä¹‹é–“çš„<strong class="highlight">ç§˜å¯†é€šè¨Šé »é“</strong>ï¼ã€</p> <ul> <li><strong>éš±ç§ç¬¬ä¸€:</strong> <strong class="highlight">åªæœ‰ä½ è‡ªå·±èƒ½çœ‹åˆ°å’Œé€²å…¥</strong>å°ˆå±¬ç©ºé–“ã€‚éœ€èº«ä»½èªè­‰é–‹é€šã€‚</li> <li><strong>é‡è¦è¨Šæ¯:</strong> ç©ºé–“å…§æœ‰ä¸‰å‰‡é‡è¦è¨Šæ¯ (åŒ…å«<strong class="highlight">å°ç”œé»å¤¥ä¼´</strong>åŠåŒ¿åèŠå¤©é€£çµ)ã€‚</li> <li><span class="important-note">çµ•å°ä¿å¯†äº‹é …:</span> Discord ä¸­<strong class="highlight">é»‘è‰²èƒŒæ™¯æ¨™ç¤º</strong>çš„å…§å®¹ (åŒ¿åçƒ˜ç„™åŠè™Ÿç¢¼(Line)ã€é è¨­å°ç”œé»åã€æ‚¨çš„å°ç”œé») <strong class="highlight">åš´ç¦å¤–æ´©</strong>ï¼</li> <li><strong>å“¡å·¥æ©Ÿå™¨äºº & å•†å“:</strong> å¯ä½¿ç”¨å“¡å·¥2æŒ‡ä»¤è³¼ç‰© (éœ€å…ˆåŠ å€¼)ã€‚<p class="architect-warning important-note">çµ¦ç”œé»å»ºç¯‰å¸«çš„æé†’: ä½¿ç”¨ã€Œé€ç¦®ç‰©ã€åŠŸèƒ½æ™‚ï¼Œå°æ–¹æœƒç›´æ¥æ”¶åˆ°é€šçŸ¥ï¼Œæ‰€ä»¥è«‹ä¸è¦ç”¨é€™å€‹åŠŸèƒ½ä¾†çµ¦ä½ è² è²¬çš„å°ç”œé»é€ç¦®å“¦ï¼</p></li> </ul> </div> `, isCompleted: false },
            { id: 'island_covenant', category: 'ç¬¬åƒç« ï¼šå¯å¯å†’éšªå³¶ç´„å®š', categoryIcon: 'ğŸ“œ', icon: '#', name: 'ç´„å®šæ ¸å¿ƒç²¾ç¥èˆ‡æ¢æ¬¾', content: ` <div class="content-section"> <h3>å¯å¯å†’éšªå³¶ç´„å®š - æ ¸å¿ƒç²¾ç¥</h3> <p>ç³»çµ±ç²¾éˆï¼šã€Œç´„å®šåœ¨å¯å¯æ›†1000å¹´é ’å¸ƒï¼Œæ˜¯å³¶å¶¼çš„åŸºçŸ³ã€‚æ ¸å¿ƒç†å¿µæ˜¯ï¼š<strong class="highlight">å»ºç«‹ä¸€å€‹åŒ…å®¹èˆ‡å°Šé‡å€‹é«”çš„ç¤¾æœƒ</strong>ã€‚ã€</p> <h3 class="channel-title">ç¬¬ä¸€ç« ï¼šç«‹ç´„ç·£ç”±</h3> <ul> <li>æ¯ä¸€å€‹ç”œé»ç”Ÿè€Œç¨ç‰¹ï¼Œæ‡‰è¢«<strong class="highlight">å°Šé‡</strong>ã€‚</li> <li>ç”œé»ä¹‹é–“çš„ç›¸ç•°æ˜¯ä¸–ç•Œçš„ç”œç¾ï¼Œ<strong class="highlight">éç¼ºé™·</strong>ã€‚</li> <li>ç”œé»å»ºç¯‰å¸«çš„è²¬ä»»æ˜¯å¹«åŠ©ç”œé»<strong class="highlight">ç™¼æ˜åƒ¹å€¼</strong>ï¼Œè€Œéæ”¹è®Šæœ¬è³ªã€‚</li> </ul> <h3 class="channel-title">ç¬¬äºŒç« ï¼šç”œé»åŸºæœ¬æ¬Šåˆ©</h3> <p>åŒ…å«ï¼šå­˜åœ¨çš„æ¬Šåˆ©ã€é¸æ“‡çš„è‡ªç”±ã€å€‹æ€§çš„å°Šé‡ã€å…¬å¹³å°å¾…ã€ç”œé»å»ºç¯‰å¸«çš„è²¬ä»»ã€‚</p> <h3 class="channel-title">ç¬¬ä¸‰ç« ï¼šçƒ˜ç„™åŠèˆ‡ç¤¾æœƒè²¬ä»»</h3> <p>ç”œé»å»ºç¯‰å¸«æ‡‰éµå®ˆå››å¤§å®ˆå‰‡ï¼š<br>1. ä¸å¼·è¿«å°ç”œé»æ”¹è®Šæœ¬è³ªï¼›<br>2. ä¸è©•åˆ¤å°ç”œé»çš„åƒ¹å€¼ï¼›<br>3. è€å¿ƒå‚¾è½å°ç”œé»çš„å¿ƒè²ï¼›<br>4. å¹«åŠ©å°ç”œé»æ‰¾åˆ°æœ€é©åˆè‡ªå·±çš„ä½ç½®ã€‚</p> <h3 class="channel-title">ç¬¬å››ç« ï¼šç´„å®šçš„å»¶çºŒèˆ‡ä¿®è¨‚</h4> <p>ä¿®è¨‚éœ€å¬é–‹ã€Œç³–éœœæœƒè­°ã€ã€‚çµèªå¼·èª¿ä¸–ç•Œçš„ç¾å¥½åœ¨æ–¼ç„¡æ•¸é¢¨å‘³çš„äº¤ç¹”ã€‚</p> </div> `, isCompleted: false },
            { id: 'island_notes_detail', category: 'é™„è¨»ï¼šå¯å¯å†’éšªå³¶é ˆçŸ¥', categoryIcon: 'ğŸ“Œ', icon: '#', name: 'å¯å¯å†’éšªå³¶é ˆçŸ¥ (é»ƒé‡‘å®ˆå‰‡)', content: ` <div class="content-section"> <h3>å¯å¯å†’éšªå³¶é ˆçŸ¥ (è¶…ç´šé‡è¦!)</h3> <p>ç³»çµ±ç²¾éˆï¼šã€Œé€™äº›æ˜¯å³¶ä¸Šçš„é»ƒé‡‘å®ˆå‰‡ï¼Œè«‹å‹™å¿…ç‰¢è¨˜ï¼ã€</p> <ol> <li>å„å€‹å°ç”œé»èˆ‡ç”œé»å»ºç¯‰å¸«ç™»å…¥å¯å¯å†’éšªå³¶å¾Œï¼Œç®¡ç†å“¡æœƒé€æ­¥ç™»å…¥å„ç”œé»çš„èº«ä»½çµ„ï¼Œå½“èº«ä»½çµ„ç¢ºå®šå¾Œï¼Œå„ä½å°‡èƒ½å¤ è¦‹åˆ°å„è‡ªã€å„çµ„åˆ¥çš„ç§äººæˆ¿é–“ï¼›è‹¥ç™»å…¥å¾Œå„æˆ¿é–“å°šæœªé¡¯ç¾ï¼Œè«‹ç¨å¾…ã€‚</li> <li>åœ¨å„è‡ªç§äººçš„èŠå¤©å®¤ä¸­ï¼ˆDiscordï¼‰ï¼Œå·²æœ‰ä¸‰å‰‡è¨Šæ¯ï¼Œåˆ†ç‚ºæ­¡è¿è¨Šæ¯ã€æ‚¨çš„å°ç”œé»å…¬å¸ƒèˆ‡åŒ¿åèŠå¤©å®¤é€£çµã€ç”œé»å»ºç¯‰å¸«åŒ¿åèŠå¤©å®¤é€£çµï¼›è«‹å°æ–¼Discordé¡¯ç¤ºç‚º<strong class="highlight">é»‘è‰²</strong>çš„éƒ¨ä»½ä¿å¯†ï¼Œ<strong class="highlight">å‹¿é€éœ²çµ¦ä»–äºº</strong>ï¼ŒåŒ…å«ã€ŒåŒ¿åçƒ˜ç„™åŠçš„è™Ÿç¢¼ï¼ˆLineï¼‰ã€ã€ã€Œé è¨­å°ç”œé»çš„åç¨±ã€ã€ã€Œæ‚¨çš„å°ç”œé»ã€ï¼›é¡¯ç¤ºç‚ºé»‘è‰²çš„éƒ¨åˆ†é»æ“Šå¾Œå³å¯é¡¯ç¾ã€‚</li> <li>é€²å…¥å¯å¯å†’éšªå³¶ï¼ˆDiscordï¼‰å¾Œï¼Œè«‹å°‡æš±ç¨±æ”¹ç‚º<strong class="highlight">æœ¬å</strong>ã€‚</li> <li>é€²å…¥ã€ŒåŒ¿åçƒ˜ç„™åŠï¼ˆLineï¼‰ã€è«‹ä»¥<strong class="highlight">é è¨­çš„æš±ç¨±é€²å…¥</strong>ï¼›æˆ–ç”±ã€Œå½¢å®¹è©ï¼‹ç”œé»åã€çµ„åˆæˆçš„æš±ç¨±é€²å…¥ï¼Œè‹¥æš±ç¨±é¸æ“‡è‡ªè¨‚ï¼Œå‰‡éœ€è¦å°‡æ–°çš„åç¨±æä¾›çµ¦ç®¡ç†å“¡ã€‚</li> <li>å¯å¯å†’éšªå³¶çš„å„å€‹ç©ºé–“éƒ½æœ‰å„è‡ªçš„åŠŸèƒ½ï¼ŒåŒæ™‚å°æ–¼å°ç”œé»èˆ‡ç”œé»å»ºç¯‰å¸«éƒ½æœƒæœ‰è‘—ä¸åŒçš„æ¬Šé™è¨­å®šï¼Œé—œæ–¼ç©ºé–“çš„åŠŸèƒ½å¯è‡³ç¬¬è²³ç« ï¼šå¯å¯å†’éšªå³¶æŸ¥çœ‹ã€‚</li> <li>å¯å¯å†’éšªå³¶çš„å•†å“ç³»çµ±ï¼Œå°‡åœ¨å¯†ç±Œæ™‚é–‹å•Ÿï¼Œå°‡ç”±çµ±ä¸€å•†å“æˆ–ç‰¹åˆ¥æŒ‡å®šåŸ·è¡Œï¼›å±†æ™‚æ‚¨å¯ä»¥å…ˆåŠ å€¼ç¾é‡‘è‡³ç³»çµ±ä¸­ï¼ˆå°‡éŒ¢äº¤çµ¦ç®¡ç†å“¡å”åŠ©å„²å€¼ï¼‰ï¼Œä¸¦é¸æ“‡å•†å“ï¼Œç®¡ç†å“¡å°‡ä»£ç‚ºé€å‡ºï¼Œå¦æˆåŠŸé€å‡ºå¾Œæœƒå‚³é€æ˜ç´°ï¼Œæ˜ç´°æœƒåœ¨å€‹äººçš„è¨Šæ¯å‚³é€ã€‚</li> <li>ã€Œå»ºç¯‰å¸«ã€ç”±æ–¼æ³•è¦ï¼Œéœ€è¦æœ‰å»ºç¯‰å¸«è­‰ç…§æ‰èƒ½ç¨±å»ºç¯‰å¸«ï¼Œç‚ºä¿è­·å„ä½ä¸æœƒé€™éº¼å®¹æ˜“è¢«å‘Šï¼Œå»ºè­°å„ä½<strong class="highlight">ä¸è¦ç°¡ç¨±ã€Œå»ºç¯‰å¸«ã€å–”ï½</strong></li> <li>å¯å¯å†’éšªå³¶å…±æœ‰ä¸‰ä½å“¡å·¥ï¼Œä½†ä»–å€‘ä¸æ™‚æœƒç½·å·¥ï¼Œå½“ä»–å€‘ç½·å·¥æ™‚ï¼Œå¯ä»¥ç­‰ä¸€äº›æ™‚é–“å†å’Œä»–å€‘äº’å‹•ã€‚</li> <li>ç”œé»å»ºç¯‰å¸«çš„å­˜åœ¨æ—¨åœ¨<strong class="highlight">å”åŠ©å°ç”œé»è‡ªç”±é–‹å±•</strong>ï¼Œä¸¦æˆç‚ºå°ç”œé»çš„æ”¯æŒã€‚</li> </ol> </div> `, isCompleted: false },
            { id: 'manager_words', category: 'æœ€çµ‚ç« ï¼šå³¶å¶¼çš„æº«åº¦èˆ‡ç¥ç¦', categoryIcon: 'ğŸ’–', icon: '#', name: 'ç®¡ç†å“¡çš„ç¥ç¦èˆ‡æœŸç›¼', content: ` <div class="content-section"> <h3>ç®¡ç†å“¡çš„ç¥ç¦èˆ‡æœŸç›¼</h3> <p>ç³»çµ±ç²¾éˆï¼šã€Œå°ç”œé»ï¼Œä½ å·²ç¶“å®Œæˆäº†å¤§éƒ¨åˆ†çš„æ¢ç´¢ï¼Œåšå¾—éå¸¸æ£’ï¼ç¾åœ¨ï¼Œè«‹è½è½å³¶å¶¼ç®¡ç†å“¡å€‘æƒ³å°ä½ èªªçš„è©±ï¼Œé€™æ˜¯ä»–å€‘å°æ‰€æœ‰æ–°æˆå“¡çš„æº«æš–æœŸç›¼ã€‚ã€</p> <p>å¯å¯å†’éšªå³¶ä¸Šï¼Œæœ‰è¨±å¤šå¯æ„›çš„å°ç”œé»èˆ‡ç´°å¿ƒå‘µè­·ä»–å€‘çš„ç”œé»å»ºç¯‰å¸«ã€‚ä»–å€‘å…±åŒç¶­æŒè‘—é€™åº§å³¶å¶¼çš„ç”œç¾æ°›åœï¼Œè®“ç³–éœœé›²é£„è•©åœ¨å¤©ç©ºï¼Œå·§å…‹åŠ›æ²³æµç·©ç·©æµæ·Œï¼Œæ§‹ç¯‰å‡ºä¸€å€‹å……æ»¿é¦™æ°£èˆ‡æº«æš–çš„ä¸–ç•Œã€‚</p> <p>ç„¶è€Œï¼Œéš¨è‘—å³¶å¶¼ç™¼å±•ï¼Œæ–°çš„æŒ‘æˆ°é€æ¼¸æµ®ç¾â€”â€”æœ‰äº›å°ç”œé»åœ¨æˆé•·éç¨‹ä¸­è¿·å¤±äº†æ–¹å‘ï¼Œä¸ç¢ºå®šè‡ªå·±çš„æœªä¾†ï¼›æœ‰äº›ç”œé»å»ºç¯‰å¸«æ‰¿æ“”äº†éå¤šè²¬ä»»ï¼Œç„¡æ³•å…¼é¡§å°ç”œé»çš„éœ€æ±‚ï¼›ç”šè‡³å³¶ä¸Šçš„ä¸‰ä½æ„›ç½·å·¥çš„å“¡å·¥ï¼Œæ™‚å¸¸å› ç‚ºç¨®ç¨®ç†ç”±åœä¸‹æ‰‹é‚Šå·¥ä½œï¼Œä½¿å¾—çƒ˜ç„™åŠçš„é‹ä½œå¢æ·»ä¸å°‘å›°é›£èˆ‡è®Šæ•¸ã€‚</p> <p>é¢å°é€™äº›æŒ‘æˆ°ï¼Œç®¡ç†å“¡æœŸå¾…å»ºç«‹ä¸€å€‹<strong class="highlight">æ”¯æŒç¶²è·¯</strong>ï¼Œè®“ç”œé»å»ºç¯‰å¸«ã€å°ç”œé»å€‘ï¼Œä»¥åŠå³¶ä¸Šçš„æ‰€æœ‰å±…æ°‘éƒ½èƒ½äº’ç›¸æ‰¶æŒï¼Œç¢ºä¿æ¯å€‹ç”œé»éƒ½èƒ½å¤ æ‰¾åˆ°è‡ªå·±çš„åƒ¹å€¼èˆ‡æ­¸å±¬ã€‚é€™å€‹æ”¯æŒç¶²è·¯ä¸åƒ…å°‡æä¾›å”åŠ©èˆ‡æŒ‡å¼•ï¼Œä¹Ÿè‡´åŠ›å‰µé€ æ›´å’Œè«§çš„ç’°å¢ƒï¼Œè®“å³¶å¶¼çš„ç”œç¾æ°£æ¯å¾—ä»¥å»¶çºŒï¼Œè®“æ¯ä½å°ç”œé»éƒ½èƒ½è‡ªç”±é–‹å±•ï¼Œåœ¨æ•…äº‹ä¸­ç¶»æ”¾å…‰å½©ã€‚</p> </div> `, isCompleted: false },
            { id: 'cant_reach_this', category: 'æœ€çµ‚ç« ï¼šå³¶å¶¼çš„æº«åº¦èˆ‡ç¥ç¦', categoryIcon: 'ğŸ’–', icon: '#', name: 'ä½ é»ä¸åˆ°å§ï¼', content: ` <div class="content-section"> <h3 class="channel-title">ä½ é»ä¸åˆ°å§ï¼</h3> <p>ç³»çµ±ç²¾éˆï¼šã€Œå˜¿å˜¿ï¼Œé€™æ˜¯ä¸€å€‹éš±è—çš„å½©è›‹é »é“ï¼ä½ èƒ½çœ‹åˆ°é€™è£¡ï¼Œèªªæ˜ä½ çœŸçš„å¾ˆåŠªåŠ›åœ¨æ¢ç´¢å‘¢ï¼ã€</p> <p>ğŸ‰ğŸ‰ğŸ‰</p> <p>å…¶å¯¦ä¹Ÿæ²’æœ‰ä»€éº¼ç‰¹åˆ¥çš„å…§å®¹ï¼Œå°±æ˜¯æƒ³è·Ÿä½ èªªè²ã€Œæ¢ç´¢è¾›è‹¦äº†ï¼ã€</p> <p>å¸Œæœ›ä½ åœ¨å¯å¯å†’éšªå³¶ç©å¾—é–‹å¿ƒï¼</p> </div> `, isCompleted: false }
        ];

        const brioDialogueData = {
            id: 'brio_server_content', name: 'èˆ‡å¸ƒé‡Œæ­çš„è¨˜äº‹è¨˜éŒ„', icon: 'ğŸ‘¨â€ğŸ³',
            subTopics: [
                { id: 'brio_chats', icon: 'ğŸ’¬', name: 'å¸ƒé‡Œæ­çš„æ™ºæ…§è¨˜äº‹', content: ` <div class="message-group"> <div class="message"> <div class="message-avatar">å¸ƒ</div> <div class="message-content"> <div class="message-header"> <span class="message-username">å¸ƒé‡Œæ­</span> <span class="message-timestamp">å¯å¯æ›† æŸå¹´æŸæœˆæŸæ—¥ - é—œæ–¼ã€Šé’æ˜¥ã€‹</span> </div> <div class="message-text"> <p>ã€Œæ­²æœˆæ‚ æ‚ ï¼Œè¡°å¾®åªåŠè‚Œè†šï¼Œç†±å¿±æ‹‹å»ï¼Œé ¹å»¢å¿…è‡³éˆé­‚ã€‚ã€<br>â€”â€”å¡ç¹†çˆ¾Â·å„çˆ¾æ›¼ã€Šé’æ˜¥ã€‹</p> <p>å®å®å®é¬†ï¼Œæ˜¯é€™å°±æ˜¯å†èªªä½ ï¼Œä¸åªçš®è†šé¬†é¬†çš„ï¼Œé‚„é ¹å»¢åˆ°äº†éˆé­‚ã€‚</p> </div> </div> </div> </div> <div class="message-group"> <div class="message"> <div class="message-avatar kua">å®</div> <div class="message-content"> <div class="message-header"> <span class="message-username kua">å®å®å®é¬†</span> <span class="message-timestamp">ç‰‡åˆ»ä¹‹å¾Œ</span> </div> <div class="message-text"> <p>åœ¨å•¦ï¼Œå¹¹ã€‚</p> </div> </div> </div> </div> <div class="message-group"> <div class="message"> <div class="message-avatar">å¸ƒ</div> <div class="message-content"> <div class="message-header"> <span class="message-username">å¸ƒé‡Œæ­</span> <span class="message-timestamp">å¯å¯æ›† å¦ä¸€å¹´æŸæœˆæŸæ—¥ - é—œæ–¼ã€Šçœ‹ä¸è¦‹çš„åŸå¸‚ã€‹</span> </div> <div class="message-text"> <p>ã€Œç”Ÿéˆçš„åœ°ç„ï¼Œä¸æ˜¯ä¸€å€‹å³å°‡ä¾†è‡¨çš„åœ°æ–¹ï¼›å¦‚æœçœŸæœ‰ä¸€å€‹åœ°ç„ï¼Œå®ƒå·²ç¶“å°±åœ¨é€™å…’å­˜åœ¨äº†ï¼Œé‚£æ˜¯æˆ‘å€‘æ¯å¤©ç”Ÿæ´»å…¶é–“çš„åœ°ç„ï¼Œæ˜¯æˆ‘å€‘èšåœ¨ä¸€èµ·è€Œå½¢æˆçš„åœ°ç„ã€‚ã€<br>â€”â€”å¡çˆ¾ç¶­è«¾ã€Šçœ‹ä¸è¦‹çš„åŸå¸‚ã€‹</p> <p>ä½ èƒ½å¤ æƒ³åƒä¸€å †ç”œé»èšåœ¨ä¸€èµ·å—ï¼Ÿé‚£ç°¡ç›´æ˜¯å€‹å¤©å ‚ã€‚</p> </div> </div> </div> </div> <div class="message-group"> <div class="message"> <div class="message-avatar">å¸ƒ</div> <div class="message-content"> <div class="message-header"> <span class="message-username">å¸ƒé‡Œæ­</span> <span class="message-timestamp">å¯å¯æ›† è¿‘æœŸ - é—œæ–¼å¥¶é¾</span> </div> <div class="message-text"> <p>å¥¶é¾å°±æ˜¯æ²’æœ‰è…®ç´…ã€è€³æœµåŠé–ƒé›»å½¢ç‹€å°¾å·´çš„çš®å¡ä¸˜ã€‚</p> <p><em style="color:var(--discord-text-muted); font-size:0.9em;">(ç²¾éˆç”»å¤–éŸ³ï¼šé€™å°±æ˜¯è‘—åçš„å¥¶é¾å‚³èªªç”±ä¾†ï¼XD)</em></p> </div> </div> </div> </div> `, isCompleted: false },
                { id: 'brio_history', icon: 'ğŸ“œ', name: 'é—œæ–¼å¸ƒé‡Œæ­ (æ­·å²ç‰‡æ®µ)', content: ` <div class="content-section" style="background-color:var(--discord-bg-medium); border: 1px solid var(--discord-bg-light);"> <h3>é—œæ–¼å¸ƒé‡Œæ­çš„æ›´å¤šæ•…äº‹ (æ­·å²ç‰‡æ®µ)</h3> <p>åœ¨å¯å¯æ›†127å¹´ï¼Œå³¶ä¸Šå°±æœ‰äº†é€™ä½å‚³å¥‡çš„ç”œé»å»ºç¯‰å¸«â€”â€”å¸ƒé‡Œæ­ (Brio)ã€‚ä»–ä¸åªæ˜¯è£½ä½œç”œé»ï¼Œæ›´æ˜¯å°ç”œé»å€‘çš„å®ˆè­·è€…ã€‚ä»–ç”¨å¥¶æ²¹èˆ¬æº«æš–çš„é›™æ‰‹ï¼Œç‚ºæ¯å€‹å³å°‡èª•ç”Ÿçš„ç”œé»çŒæ³¨éˆé­‚ï¼Œè¼•è²å°å®ƒå€‘èªªï¼šã€Œæ­¡è¿ä¾†åˆ°ä¸–ç•Œï¼Œä½ æº–å‚™å¥½æ¢ç´¢è‡ªå·±çš„ç”œç¾äººç”Ÿäº†å—ï¼Ÿã€</p> <p>å¸ƒé‡Œæ­æ·±çŸ¥æ¯å€‹ç”œé»çš„ç¨ç‰¹ã€‚ä»–æ›¾å°ç„¦æ…®çš„è‰è“æ³¡èŠ™èªªï¼šã€Œä½ ä¸éœ€è¦è®Šå¾—é…¥è„†ï¼ŒæŸ”è»Ÿä¹Ÿæ˜¯ä¸€ç¨®å¯æ„›çš„ç‰¹è³ªã€‚ã€ä»–ä¹Ÿé¼“å‹µè†½æ€¯çš„å¯å¯å¯é Œï¼ˆä¹Ÿå°±æ˜¯æˆ‘å€‘ç†Ÿæ‚‰çš„ã€å®å®å®é¬†ã€ï¼ï¼‰ï¼šã€ä½ ç¶“éå±¤å±¤æŠ˜ç–Šï¼Œæ‰æœ‰äº†ç¾åœ¨çš„æ¨£å­ï¼Œä¸æœƒé€™éº¼å®¹æ˜“å®æ‰çš„ã€‚ã€ä»–çš„ä¿¡å¿µæ˜¯å¹«åŠ©ç”œé»ç™¼æ˜è‡ªå·±çš„åƒ¹å€¼ï¼Œè€Œéæ”¹è®Šå®ƒå€‘ã€‚</p> </div> `, isCompleted: false }
            ]
        };

        document.addEventListener('DOMContentLoaded', () => {
            const serverListEl = document.getElementById('serverList');
            const channelsPanelEl = document.getElementById('channelsPanelEl');
            const panelToggleButtonEl = document.getElementById('panelToggleButtonEl');
            const channelListEl = document.getElementById('channelList');
            const serverNameTextEl = document.getElementById('serverNameTextEl'); 
            const contentHeaderEl = document.getElementById('contentHeader');
            const currentChannelNameEl = document.getElementById('currentChannelName');
            const contentBodyWrapperEl = document.getElementById('contentBodyWrapper');
            const contentBodyEl = document.getElementById('contentBody');
            const completionToastEl = document.getElementById('completionToast');

            let activeServerId = 'guide';
            let activeChannelId = 'welcome';
            let isChannelPanelCollapsed = false;

            function toggleChannelsPanel() {
                isChannelPanelCollapsed = !isChannelPanelCollapsed;
                if (channelsPanelEl) {
                    channelsPanelEl.classList.toggle('collapsed', isChannelPanelCollapsed);
                }
                if (panelToggleButtonEl) {
                    panelToggleButtonEl.textContent = isChannelPanelCollapsed ? 'â˜°' : 'Â«';
                }
                // Toggling the panel should NOT directly affect the input mock's visibility
                // The input mock's visibility is handled by selectContentItem
            }

            if(panelToggleButtonEl && channelsPanelEl) {
                panelToggleButtonEl.addEventListener('click', toggleChannelsPanel);
            }

            function renderServers() {
                if (!serverListEl) return;
                serverListEl.innerHTML = '';
                servers.forEach(server => {
                    const serverIconDiv = document.createElement('div');
                    serverIconDiv.classList.add('server-icon');
                    serverIconDiv.textContent = server.icon;
                    serverIconDiv.dataset.id = server.id;
                    if (server.id === activeServerId) {
                        serverIconDiv.classList.add('active');
                    }
                    serverIconDiv.addEventListener('click', () => selectServer(server.id));
                    serverListEl.appendChild(serverIconDiv);
                });
            }

            function renderChannelsOrDialogueTitle() {
                if (!channelListEl || !serverNameTextEl || !panelToggleButtonEl) return;
                channelListEl.innerHTML = '';
                const currentServer = servers.find(s => s.id === activeServerId);
                if (serverNameTextEl) {
                    serverNameTextEl.textContent = currentServer ? currentServer.name : 'æœªçŸ¥å€åŸŸ';
                }
                panelToggleButtonEl.style.display = 'flex';

                if (activeServerId === 'guide') {
                    let lastCategory = null;
                    guideTopics.forEach(topic => {
                        if (topic.category && topic.category !== lastCategory) {
                            const categoryDiv = document.createElement('div');
                            categoryDiv.classList.add('channel-category-header');
                            categoryDiv.innerHTML = `<span class="category-icon">${topic.categoryIcon || ''}</span>${topic.category}`;
                            channelListEl.appendChild(categoryDiv);
                            lastCategory = topic.category;
                        }
                        const channelDiv = document.createElement('div');
                        channelDiv.classList.add('channel-item');
                        channelDiv.dataset.id = topic.id;
                        if (topic.id === activeChannelId) channelDiv.classList.add('active');
                        const channelNameSpan = document.createElement('span');
                        channelNameSpan.classList.add('channel-name-text');
                        channelNameSpan.textContent = topic.name;
                        channelDiv.innerHTML = `<span class="channel-icon">${topic.icon || '#'}</span>`;
                        channelDiv.appendChild(channelNameSpan);
                        if (topic.isCompleted) channelDiv.classList.add('completed');
                        channelDiv.addEventListener('click', () => selectContentItem(topic.id, 'topic'));
                        channelListEl.appendChild(channelDiv);
                    });
                } else if (activeServerId === 'brio') {
                    const brioCategoryHeader = document.createElement('div');
                    brioCategoryHeader.classList.add('channel-category-header');
                    brioCategoryHeader.innerHTML = `<span class="category-icon">${brioDialogueData.icon || 'ğŸ’¬'}</span>${brioDialogueData.name}`;
                    channelListEl.appendChild(brioCategoryHeader);
                    brioDialogueData.subTopics.forEach(subTopic => {
                        const channelDiv = document.createElement('div');
                        channelDiv.classList.add('channel-item');
                        channelDiv.dataset.id = subTopic.id;
                        if (subTopic.id === activeChannelId) channelDiv.classList.add('active');
                        const channelNameSpan = document.createElement('span');
                        channelNameSpan.classList.add('channel-name-text');
                        channelNameSpan.textContent = subTopic.name;
                        channelDiv.innerHTML = `<span class="channel-icon">${subTopic.icon || 'ğŸ“œ'}</span>`;
                        channelDiv.appendChild(channelNameSpan);
                        if (subTopic.isCompleted) channelDiv.classList.add('completed');
                        channelDiv.addEventListener('click', () => selectContentItem(subTopic.id, 'brio_subtopic'));
                        channelListEl.appendChild(channelDiv);
                    });
                }
            }

            function selectServer(serverId) {
                if (!servers.find(s => s.id === serverId)) return;
                activeServerId = serverId;

                // Important: Do NOT toggle the collapsed state here unless intended.
                // This was `channelsPanelEl.classList.toggle('collapsed', isChannelPanelCollapsed);`
                // which might have been an issue if `isChannelPanelCollapsed` was stale.
                // The panel's collapsed state should only be changed by `toggleChannelsPanel`.
                // However, we need to *apply* the current state if the class was removed by something else (unlikely here)
                if (channelsPanelEl) {
                    if (isChannelPanelCollapsed) {
                        channelsPanelEl.classList.add('collapsed');
                    } else {
                        channelsPanelEl.classList.remove('collapsed');
                    }
                }
                 if (panelToggleButtonEl) {
                    panelToggleButtonEl.textContent = isChannelPanelCollapsed ? 'â˜°' : 'Â«';
                }


                renderServers();

                if (activeServerId === 'guide') {
                    activeChannelId = guideTopics[0] ? guideTopics[0].id : 'welcome';
                    selectContentItem(activeChannelId, 'topic');
                } else if (activeServerId === 'brio') {
                    activeChannelId = brioDialogueData.subTopics[0] ? brioDialogueData.subTopics[0].id : null;
                    if (activeChannelId) {
                        selectContentItem(activeChannelId, 'brio_subtopic');
                    } else { 
                        if(contentBodyWrapperEl && currentChannelNameEl && contentHeaderEl && contentBodyEl) {
                             contentBodyEl.innerHTML = '<div class="content-section"><p>å¸ƒé‡Œæ­æš«æ™‚æ²’æœ‰è¨˜äº‹å¯çœ‹ã€‚</p></div>';
                             const existingInputMock = contentBodyWrapperEl.querySelector('.discord-input-mock-wrapper');
                             if (existingInputMock) existingInputMock.remove();
                             currentChannelNameEl.textContent = brioDialogueData.name;
                             const headerIconPlaceholder = contentHeaderEl.querySelector('.header-icon-placeholder');
                             if(headerIconPlaceholder) headerIconPlaceholder.innerHTML = `<div class="dm-avatar-header">${brioDialogueData.icon || brioDialogueData.name.charAt(0)}</div>`;
                        }
                    }
                }
                renderChannelsOrDialogueTitle(); 
            }

            function selectContentItem(itemId, type) {
                activeChannelId = itemId; // Update active channel ID
                let selectedItem;
                let headerIconHtml = '<span class="channel-icon">#</span>';
                let itemNameForHeader = 'æœªçŸ¥å…§å®¹';

                if (type === 'topic') {
                    selectedItem = guideTopics.find(t => t.id === itemId);
                    if(selectedItem) {
                        headerIconHtml = `<span class="channel-icon">${selectedItem.icon || '#'}</span>`;
                        itemNameForHeader = selectedItem.name;
                    }
                } else if (type === 'brio_subtopic') {
                    selectedItem = brioDialogueData.subTopics.find(st => st.id === itemId);
                    if(selectedItem) {
                        headerIconHtml = `<div class="dm-avatar-header">${brioDialogueData.icon || brioDialogueData.name.charAt(0)}</div>`;
                        itemNameForHeader = selectedItem.name;
                    }
                }

                if (selectedItem && contentHeaderEl && currentChannelNameEl && contentBodyEl && contentBodyWrapperEl) {
                    let headerIconPlaceholder = contentHeaderEl.querySelector('.header-icon-placeholder');
                    if (!headerIconPlaceholder) { 
                        headerIconPlaceholder = document.createElement('span');
                        headerIconPlaceholder.classList.add('header-icon-placeholder');
                        contentHeaderEl.insertBefore(headerIconPlaceholder, currentChannelNameEl);
                    }
                    headerIconPlaceholder.innerHTML = headerIconHtml;
                    currentChannelNameEl.textContent = itemNameForHeader;
                    contentBodyEl.innerHTML = selectedItem.content;
                    contentBodyEl.scrollTop = 0;

                    // Always remove input mock first
                    const existingInputMock = contentBodyWrapperEl.querySelector('.discord-input-mock-wrapper');
                    if (existingInputMock) existingInputMock.remove();

                    // Add input mock ONLY if the specific Brio chat is selected
                    if (activeServerId === 'brio' && activeChannelId === 'brio_chats') { // Use activeChannelId
                         const inputMockWrapper = document.createElement('div');
                         inputMockWrapper.classList.add('discord-input-mock-wrapper');
                         inputMockWrapper.innerHTML = `
                            <div class="discord-input-mock">
                                <span class="icon">âŠ•</span>
                                <span class="input-placeholder">å‘ ${brioDialogueData.name} å‚³é€è¨Šæ¯...</span>
                                <span class="icon">ğŸ˜Š</span>
                                <span class="icon">ğŸ¤</span>
                            </div>`;
                        contentBodyWrapperEl.appendChild(inputMockWrapper); 
                    }

                    if (!selectedItem.isCompleted) {
                        selectedItem.isCompleted = true;
                        checkAllCompleted();
                    }
                    renderChannelsOrDialogueTitle(); 
                }
            }

            function checkAllCompleted() {
                const allTopicsDone = guideTopics.every(topic => topic.isCompleted);
                const allBrioSubTopicsDone = brioDialogueData.subTopics.every(subTopic => subTopic.isCompleted);

                if (allTopicsDone && allBrioSubTopicsDone && completionToastEl) {
                    if (completionToastEl.classList.contains('animate')) return; 

                    completionToastEl.textContent = 'å¤ªæ£’äº†ï¼Œå°ç”œé»ï¼ä½ å·²æŒæ¡æ‰€æœ‰æŒ‡å—ç²¾è¯ï¼æº–å‚™å¥½åœ¨å³¶ä¸Šå¤§é¡¯èº«æ‰‹äº†å—ï¼ŸğŸ¥³';
                    completionToastEl.classList.remove('animate'); 
                    completionToastEl.style.display = 'block';    
                    void completionToastEl.offsetWidth;           
                    completionToastEl.classList.add('animate');   

                    completionToastEl.addEventListener('animationend', () => {
                        if (completionToastEl.classList.contains('animate')) { 
                            completionToastEl.style.display = 'none';
                            completionToastEl.classList.remove('animate');
                        }
                    }, { once: true }); 
                }
            }

            const initialElements = [
                serverListEl, channelsPanelEl, panelToggleButtonEl, channelListEl,
                serverNameTextEl, contentHeaderEl, currentChannelNameEl,
                contentBodyWrapperEl, contentBodyEl, completionToastEl
            ];
            if (initialElements.every(el => el)) {
                renderServers();
                selectServer(activeServerId); 
            } else {
                console.error("ä¸€å€‹æˆ–å¤šå€‹å¿…è¦çš„ DOM å…ƒç´ æœªæ‰¾åˆ°ï¼ŒæŒ‡å—æ¨¡æ“¬ç„¡æ³•åˆå§‹åŒ–ã€‚è«‹æª¢æŸ¥HTMLä¸­çš„IDã€‚");
                 initialElements.forEach((el, index) => {
                    const ids = ['serverList', 'channelsPanelEl', 'panelToggleButtonEl', 'channelList', 
                                 'serverNameTextEl', 'contentHeader', 'currentChannelNameEl', 
                                 'contentBodyWrapperEl', 'contentBody', 'completionToast'];
                    if (!el) console.error(`Element with expected ID '${ids[index]}' not found.`);
                });
            }
        });
    </script>
</body>
</html>
